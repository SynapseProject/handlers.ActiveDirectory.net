Name: CreateUserApi
Description: Create Ldap User
IsActive: true
Actions:
- Name: CreateUser
  Handler:
    Type: Synapse.Handlers.ActiveDirectory:ActiveDirectoryHandler
    Config:
      Type: Yaml
      Values:
        Action: Create
        RunSequential: false
        ReturnGroupMembership: false
        OutputType: Json
        PrettyPrint: false
        ReturnObjects: true
        ReturnObjectProperties: true
        ReturnAccessRules: false
        UseUpsert: true
        SuppressOutput: false
      Dynamic:
      - Source: returngroupmembership
        Target: ReturnGroupMembership
      - Source: returnobjects
        Target: ReturnObjects
      - Source: returnobjectproperties
        Target: ReturnObjectProperties
      - Source: returnaccessrules
        Target: ReturnAccessRules
  Parameters:
    Type: Yaml
    Values:
      Users:
      - Identity: 
        Name:
#       Principal Fields
        UserPrincipalName: 
        SamAccountName: 
        DisplayName: 
        Description: 
#       AuthenticationPrincipal Fields
        Enabled: 
        PermittedLogonTimes: 
        AccountExpirationDate: 
        SmartcardLogonRequired: 
        DelegationPermitted: 
        HomeDirectory: 
        ScriptTarget: 
        PasswordNotRequired: 
        PasswordNeverExpires: 
        UserCannotChangePassword: 
        AllowReversiblePasswordEncryption: 
        HomeDrive: 
#       UserPrincipal Fields
        GivenName: 
        MiddleName: 
        Surname: 
        EmailAddress: 
        VoiceTelephoneNumber: 
        EmployeeId: 
#       Other Fields and Properties
        Password: 
        Properties:
          initials:
          physicalDeliveryOfficeName:
          otherTelephone:
          wWWHomePage:
          url:
          logonWorkstation:
          userWorkstations:
          c:
          l:
          st:
          streetAddress:
          postOfficeBox:
          postalCode:
          co:
          countryCode:
          title:
          department:
          company:
          manager:
          profileTarget:
          homePhone:
          otherHomePhone:
          pager:
          otherPager:
          mobile:
          otherMobile:
          facsimileTelephoneNumber:
          otherFacsimileTelephoneNumber:
          ipPhone:
          otherIpPhone:
          info:
          lockoutTime:
    Dynamic:
#   Principal Fields
    - Source: identity
      Target: Users[0]:Identity
    - Source: name
      Target: Users[0]:Name
    - Source: userprincipalname
      Target: Users[0]:UserPrincipalName
    - Source: samaccountname
      Target: Users[0]:SamAccountName
    - Source: displayname
      Target: Users[0]:DisplayName
    - Source: description
      Target: Users[0]:Description
#   AuthenticationPrincipal Fields
    - Source: enabled
      Target: Users[0]:Enabled
    - Source: permittedlogontimes
      Target: Users[0]:PermittedLogonTimes
    - Source: accountexpirationdate
      Target: Users[0]:AccountExpirationDate
    - Source: smartcardlogonrequired
      Target: Users[0]:SmartcardLogonRequired
    - Source: delegationpermitted
      Target: Users[0]:DelegationPermitted
    - Source: homedirectory
      Target: Users[0]:HomeDirectory
    - Source: scriptTarget
      Target: Users[0]:ScriptTarget
    - Source: passwordnotrequired
      Target: Users[0]:PasswordNotRequired
    - Source: passwordneverexpires
      Target: Users[0]:PasswordNeverExpires
    - Source: usercannotchangepassword
      Target: Users[0]:UserCannotChangePassword
    - Source: allowreversiblepasswordencryption
      Target: Users[0]:AllowReversiblePasswordEncryption
    - Source: homedrive
      Target: Users[0]:HomeDrive
#   UserPrincipalFields
    - Source: givenname
      Target: Users[0]:GivenName
    - Source: middlename
      Target: Users[0]:MiddleName
    - Source: surname
      Target: Users[0]:Surname
    - Source: emailaddress
      Target: Users[0]:EmailAddress
    - Source: voicetelephonenumber
      Target: Users[0]:VoiceTelephoneNumber
    - Source: employeeid
      Target: Users[0]:EmployeeId
#   Other Fields
    - Source: password
      Target: Users[0]:Password
#   Properties
    - Source: initials
      Target: Users[0]:Properties:initials
      Parse: true
    - Source: physicaldeliveryofficename
      Target: Users[0]:Properties:physicalDeliveryOfficeName
      Parse: true
    - Source: othertelephone
      Target: Users[0]:Properties:otherTelephone
      Parse: true
    - Source: wwwhomepage
      Target: Users[0]:Properties:wWWHomePage
      Parse: true
    - Source: url
      Target: Users[0]:Properties:url
      Parse: true
    - Source: logonworkstation
      Target: Users[0]:Properties:logonWorkstation
      Parse: true
    - Source: userworkstations
      Target: Users[0]:Properties:userWorkstations
      Parse: true
    - Source: c
      Target: Users[0]:Properties:c
      Parse: true
    - Source: l
      Target: Users[0]:Properties:l
      Parse: true
    - Source: st
      Target: Users[0]:Properties:st
      Parse: true
    - Source: streetaddress
      Target: Users[0]:Properties:streetAddress
      Parse: true
    - Source: postofficebox
      Target: Users[0]:Properties:postOfficeBox
      Parse: true
    - Source: postalcode
      Target: Users[0]:Properties:postalCode
      Parse: true
    - Source: co
      Target: Users[0]:Properties:co
      Parse: true
    - Source: countrycode
      Target: Users[0]:Properties:countryCode
      Parse: true
    - Source: title
      Target: Users[0]:Properties:title
      Parse: true
    - Source: department
      Target: Users[0]:Properties:department
      Parse: true
    - Source: company
      Target: Users[0]:Properties:company
      Parse: true
    - Source: manager
      Target: Users[0]:Properties:manager
      Parse: true
    - Source: profileTarget
      Target: Users[0]:Properties:profileTarget
      Parse: true
    - Source: homephone
      Target: Users[0]:Properties:homePhone
      Parse: true
    - Source: otherhomephone
      Target: Users[0]:Properties:otherHomePhone
      Parse: true
    - Source: pager
      Target: Users[0]:Properties:pager
      Parse: true
    - Source: otherpager
      Target: Users[0]:Properties:otherPager
      Parse: true
    - Source: mobile
      Target: Users[0]:Properties:mobile
      Parse: true
    - Source: othermobile
      Target: Users[0]:Properties:otherMobile
      Parse: true
    - Source: facsimiletelephonenumber
      Target: Users[0]:Properties:facsimileTelephoneNumber
      Parse: true
    - Source: otherfacsimiletelephonenumber
      Target: Users[0]:Properties:otherFacsimileTelephoneNumber
      Parse: true
    - Source: ipphone
      Target: Users[0]:Properties:ipPhone
      Parse: true
    - Source: otheripphone
      Target: Users[0]:Properties:otherIpPhone
      Parse: true
    - Source: info
      Target: Users[0]:Properties:info
      Parse: true
    - Source: lockouttime
      Target: Users[0]:Properties:lockoutTime
      Parse: true